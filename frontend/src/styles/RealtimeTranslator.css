/* RealtimeTranslator.css
   • Drawer: Start button pinned at the bottom; Theme row remains above it
   • Native selects: glassmorphic controls + transparent/glass options list
   • No grey scrollbars in selects
   • Rest of UI preserved (brand, animated title, cards, FAB mic)
*/

/* ───────── Base + Themes ───────── */

:root{
  --bg:#f6f9ff; --card:rgba(255,255,255,0.55); --ink:#0f172a; --muted:#64748b;
  --accent:#2f80ed; --accent-ghost:rgba(47,128,237,.12); --ring:rgba(47,128,237,.25);

  --success:#10b981; --green:#22c55e; --green-bright:#32ff7e; --green-deep:#00d36f; --green-emerald:#12b76a;

  --radius:18px;
  --shadow:0 14px 40px rgba(2,8,23,.07), 0 6px 16px rgba(2,8,23,.05);

  /* Glass palette */
  --glass-bg: rgba(255,255,255,0.18);
  --glass-bg-strong: rgba(255,255,255,0.26);
  --glass-border: rgba(255,255,255,0.45);
  --glass-border-2: rgba(255,255,255,0.60);
  --glass-shadow: 0 8px 26px rgba(15, 23, 42, .15);
  --glass-grad-c: #00B0F0;
  --glass-grad-d: #00D4FF;

  /* Select options (light) */
  --opt-bg: rgba(255,255,255,0.65);
  --opt-bg-hover: rgba(255,255,255,0.78);
  --opt-border: rgba(255,255,255,0.75);
}

[data-theme="dark"]{
  --bg:#050a12; --card:rgba(11,19,32,0.55); --ink:#e6faff; --muted:#9cc7d6;
  --accent:#22d3ee; --accent-ghost:rgba(34,211,238,.20); --ring:rgba(34,211,238,.32);

  --success:#34d399; --green:#22c55e; --green-bright:#35ffa1; --green-deep:#00d36f; --green-emerald:#0ea85f;

  --shadow:0 16px 44px rgba(0,0,0,.55), 0 6px 14px rgba(0,0,0,.35);

  /* Dark Glass */
  --glass-bg: rgba(255,255,255,0.08);
  --glass-bg-strong: rgba(255,255,255,0.14);
  --glass-border: rgba(255,255,255,0.22);
  --glass-border-2: rgba(255,255,255,0.35);
  --glass-shadow: 0 12px 34px rgba(0,0,0,.40);

  /* Select options (dark) */
  --opt-bg: rgba(7,12,20,0.55);
  --opt-bg-hover: rgba(7,12,20,0.70);
  --opt-border: rgba(255,255,255,0.25);
}

*,
*::before,*::after{ box-sizing:border-box; }
html,body,#root{ height:100%; }
html,body{
  margin:0; color:var(--ink); background:var(--bg);
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  overflow-x:hidden;
}

button,select{ font:inherit; color:inherit; background:none; border:none; outline:none; }
select:focus-visible, button:focus-visible{ box-shadow:0 0 0 3px var(--ring); border-radius:12px; }

.rt2-app{ min-height:100vh; background:var(--bg); color:var(--ink); }

/* ───────── Header ───────── */

.rt2-header{
  position:sticky; top:0; z-index:8;
  display:grid; grid-template-columns:1fr auto 1fr; align-items:center;
  gap:16px; padding:14px 18px;
  background: color-mix(in oklab, var(--card), transparent 12%);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  border-bottom:1px solid color-mix(in oklab, var(--ink), transparent 88%);
}

.brand{ display:flex; align-items:center; gap:12px; font-weight:800; }
.brand-icon{ width:32px; height:32px; flex:0 0 32px; filter: drop-shadow(0 2px 6px rgba(0,0,0,.15)); user-select:none; }

/* Animated gradient title */
.brand-title{
  font-size:15.5px; font-weight:900; letter-spacing:.2px;
  background: linear-gradient(
    120deg,
    color-mix(in oklab, var(--ink), white 6%) 0%,
    color-mix(in oklab, var(--ink), white 6%) 40%,
    var(--accent) 50%,
    color-mix(in oklab, var(--ink), white 6%) 60%,
    color-mix(in oklab, var(--ink), white 6%) 100%
  );
  -webkit-background-clip: text; background-clip: text; color: transparent;
  animation: titleShimmer 3.6s ease-in-out infinite;
}
@keyframes titleShimmer{
  0%{ background-position:-140% 0; }
  45%,100%{ background-position:140% 0; }
}
@media (prefers-reduced-motion: reduce){ .brand-title{ animation:none; color:var(--ink); background:none; } }

.brand-sub{ font-size:12px; color:var(--muted); font-weight:600; }

/* ── Language selectors: Full Glassmorphism ── */
.langbar{ display:flex; align-items:center; justify-content:center; gap:16px; }
.lang{ display:flex; align-items:center; gap:10px; padding:4px 0; }
.lang-role{ font-size:12px; color:var(--muted); font-weight:900; letter-spacing:.3px; text-transform:uppercase; }

/* Glass capsule wrapper around native <select> */
.lang-input{
  position: relative; display: inline-flex; align-items: center; gap: 10px;
  padding: 10px 14px; border-radius: 14px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow), inset 0 1px 0 rgba(255,255,255,.18);
  backdrop-filter: blur(12px) saturate(140%); -webkit-backdrop-filter: blur(12px) saturate(140%);
  transition: transform .18s ease, border-color .18s ease, background .22s ease, box-shadow .22s ease;
  overflow: clip;
}
.lang-input::before{
  content:""; position:absolute; inset:-2px;
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.22) 20%, rgba(255,255,255,.06) 40%, transparent 60%);
  transform: translateX(-120%); animation: sheen 3.6s ease-in-out infinite; pointer-events:none;
}
@keyframes sheen{ 0%{transform:translateX(-120%);} 60%,100%{transform:translateX(120%);} }
.lang-input:hover, .lang-input:has(select:focus-visible){
  border-color: var(--glass-border-2);
  background: linear-gradient(145deg, var(--glass-bg), rgba(255,255,255,0.22));
  box-shadow: 0 8px 28px rgba(0,0,0,.12), 0 0 0 3px color-mix(in oklab, var(--glass-grad-d), transparent 80%), inset 0 1px 0 rgba(255,255,255,.32);
  transform: translateY(-1px);
}
.lang-code{
  font-size:12px; color:var(--ink); font-weight:900; letter-spacing:.35px;
  padding:4px 8px; border-radius:10px;
  background: linear-gradient(145deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
  border: 1px solid rgba(255,255,255,.55); box-shadow: inset 0 1px 0 rgba(255,255,255,.55);
}
.lang-input select{
  appearance:none; background:transparent; border:none; color:inherit;
  font-weight:800; padding:8px 32px 8px 10px; border-radius:10px; position:relative; z-index:1; cursor:pointer;
  text-shadow:0 1px 0 rgba(255,255,255,.25);
}
/* caret */
.lang-input::after{
  content:""; position:absolute; right:10px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; border-radius:6px;
  background: radial-gradient(80% 80% at 50% 35%, rgba(255,255,255,.85), rgba(255,255,255,.35)),
             linear-gradient(145deg, var(--glass-grad-c), var(--glass-grad-d));
  box-shadow: 0 2px 6px rgba(0,0,0,.20), inset 0 1px 0 rgba(255,255,255,.55);
  mask: conic-gradient(from 135deg at 50% 52%, #0000 0 46%, #000 46% 54%, #0000 54% 100%);
  opacity:.92; transition: transform .18s ease, box-shadow .18s ease;
}
.lang-input:hover::after, .lang-input:has(select:focus-visible)::after{
  transform: translateY(-50%) scale(1.05);
  box-shadow: 0 3px 10px rgba(0,0,0,.24), inset 0 1px 0 rgba(255,255,255,.7);
}

/* Make dropdown list (options) look glassy/transparent where supported */
.lang-input select option,
.drawer-row select option{
  background: var(--opt-bg);
  color: var(--ink);
}
.lang-input select option:checked,
.drawer-row select option:checked{
  background: var(--opt-bg-hover);
  color: var(--ink);
  text-shadow: 0 0 0 transparent; /* avoid UA blue glow */
}

/* Remove ugly grey scrollbars in selects */
.lang-input select::-webkit-scrollbar,
.drawer-row select::-webkit-scrollbar{ width:8px; }
.lang-input select::-webkit-scrollbar-track,
.drawer-row select::-webkit-scrollbar-track{ background: transparent; }
.lang-input select::-webkit-scrollbar-thumb,
.drawer-row select::-webkit-scrollbar-thumb{
  background: linear-gradient(145deg, var(--glass-grad-c), var(--glass-grad-d));
  border-radius: 8px; border: 2px solid rgba(255,255,255,.35);
}
.lang-input select{ scrollbar-width:thin; scrollbar-color: color-mix(in oklab, var(--glass-grad-d), transparent 10%) transparent; }
.drawer-row select{ scrollbar-width:thin; scrollbar-color: color-mix(in oklab, var(--glass-grad-d), transparent 10%) transparent; }

/* Separator */
.lang-swap{ color:var(--muted); font-weight:900; user-select:none; }

.hdr-right{ justify-self:end; display:flex; align-items:center; gap:10px; }

/* ───────── Drawer (mobile sidebar) ───────── */

.hamburger{ width:42px; height:36px; border-radius:8px; display:none; align-items:center; justify-content:center; gap:4px; cursor:pointer; background:transparent; }
.hamburger span{ display:block; width:22px; height:2px; background:var(--ink); border-radius:2px; transition:transform .18s ease, opacity .18s ease; }
.hamburger.open span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
.hamburger.open span:nth-child(2){ opacity:0; }
.hamburger.open span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }
@media (max-width:1024px){ .hamburger{ display:inline-flex; } .hdr-right .switch{ display:none !important; } }

.drawer{ position:fixed; inset:0; pointer-events:none; z-index:12; }
.drawer.open{ pointer-events:auto; }
.drawer-panel{
  position:absolute; right:-340px; top:0; width:340px; max-width:92vw; height:100%;
  display:flex; flex-direction:column; /* key: column to push footer to bottom */
  background: color-mix(in oklab, var(--card), transparent 10%);
  backdrop-filter: blur(14px) saturate(140%); -webkit-backdrop-filter: blur(14px) saturate(140%);
  color:var(--ink);
  box-shadow:-22px 0 44px rgba(0,0,0,.10);
  border-left:1px solid var(--glass-border);
  transition:right .22s ease;
}
.drawer.open .drawer-panel{ right:0; }
.drawer-backdrop{ position:absolute; inset:0; background:rgba(2,8,23,.24); opacity:0; transition:opacity .22s ease; }
.drawer.open .drawer-backdrop{ opacity:1; }

.drawer-h{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px; border-bottom:1px solid var(--glass-border);
}
.drawer-title{ font-weight:800; }
.drawer-close{ width:32px; height:32px; border-radius:8px; background: linear-gradient(145deg, rgba(255,255,255,.35), rgba(255,255,255,.18)); color:var(--ink); }

/* Scrollable content area */
.drawer-section{
  padding:12px 16px; display:flex; flex-direction:column; gap:14px;
  flex: 1 1 auto; min-height:0; overflow:auto;
  padding-bottom: 96px; /* ensure content not hidden behind sticky footer */
}

/* Language rows + labels */
.drawer-row{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.drawer-row > span{ font-weight:700; color:var(--muted); }

/* Glass selects inside drawer */
.drawer-row select{
  appearance:none; color:inherit; font-weight:800; cursor:pointer;
  background: var(--glass-bg);
  border:1px solid var(--glass-border);
  box-shadow: var(--glass-shadow), inset 0 1px 0 rgba(255,255,255,.15);
  backdrop-filter: blur(10px) saturate(130%); -webkit-backdrop-filter: blur(10px) saturate(130%);
  border-radius:12px; padding:10px 34px 10px 12px;
  transition: background .2s ease, border-color .2s ease, transform .15s ease;
  position: relative;
}
.drawer-row select:hover, .drawer-row select:focus-visible{
  background: linear-gradient(145deg, var(--glass-bg), var(--glass-bg-strong));
  border-color: var(--glass-border-2); transform: translateY(-1px);
}

/* Sticky/anchored footer with action at bottom */
.drawer-footer{
  position: sticky; bottom: 0; left: 0; right: 0;
  margin-top:auto; /* push it to the bottom in flex column */
  background: color-mix(in oklab, var(--card), transparent 6%);
  backdrop-filter: blur(14px) saturate(140%); -webkit-backdrop-filter: blur(14px) saturate(140%);
  border-top:1px solid var(--glass-border);
  padding: 12px 16px 16px;
}
.drawer-footer .footer-row{
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px;
}
.drawer-footer .footer-row > span{ font-weight:700; color:var(--muted); }

/* We don't change JSX, so target existing button class and make it behave like footer item */
.drawer-action{
  display:block; width:100%;
  margin: 10px 0 0; padding:12px 16px; border-radius:12px;
  background: linear-gradient(145deg, var(--glass-grad-c), var(--glass-grad-d));
  color:#001827; font-weight:900; border:none; cursor:pointer;
  box-shadow: 0 10px 22px color-mix(in oklab, var(--glass-grad-d), transparent 70%), inset 0 1px 0 rgba(255,255,255,.7);
}
.drawer-action.connected{ background: linear-gradient(145deg,#16e06a,#12b76a); color:#00220f; }

/* In case the JSX doesn’t have .drawer-footer wrapper,
   still force the button to the bottom of the panel */
.drawer-panel > .drawer-action{
  margin-top: auto; /* push to bottom of flex column */
  margin-left:16px; margin-right:16px; margin-bottom:16px;
}

/* ───────── Main ───────── */

.rt2-main{
  max-width:1160px; margin:14px auto 104px; padding:0 16px;
  display:flex; flex-direction:column; gap:16px;
}

/* ORB container */
.orb-row{ display:flex; justify-content:center; }
.orb-shell{
  width: min(56vw, 360px); aspect-ratio: 1/1; border-radius: 999px;
  background: radial-gradient(120% 120% at 50% 30%,
              color-mix(in oklab, var(--accent), white 82%) 0%,
              color-mix(in oklab, var(--bg), white 12%) 42%,
              var(--card) 72%);
  box-shadow: var(--shadow), inset 0 0 0 1px rgba(255,255,255,.22);
  display:grid; place-items:center; margin: 4px auto 0; overflow:hidden;
}
.orb-shell.compact{ width: min(56vw, 360px); }

/* Cards grid */
.cards{ display:grid; gap:18px; grid-template-columns:1fr 1fr; margin-top: 6px; }
.cards.raised{ transform: translateY(0); }

/* Glass cards with internal scroll */
.card{
  background: color-mix(in oklab, var(--card), transparent 10%);
  border-radius:var(--radius);
  box-shadow: var(--shadow);
  border:1px solid var(--glass-border);
  height: clamp(280px, 34vh, 420px);
  display:flex; flex-direction:column; min-height:0;
  backdrop-filter: blur(8px) saturate(125%); -webkit-backdrop-filter: blur(8px) saturate(125%);
}
.card-h{ display:flex; align-items:center; justify-content:space-between; padding: 14px 16px; border-bottom:1px solid var(--glass-border); }
.title{ display:flex; align-items:center; gap:10px; font-weight:900; }
.avatar{ width:18px; height:18px; border-radius:6px; background: linear-gradient(145deg, rgba(255,255,255,.55), rgba(255,255,255,.25)); }
.chip{
  font-size:12px; padding:6px 10px; border-radius:10px;
  background: linear-gradient(145deg, var(--glass-grad-c), var(--glass-grad-d));
  color:#002438; font-weight:900; box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}

.card-b{
  padding: 14px 16px; flex: 1 1 auto;
  overflow: auto; -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
  line-height:1.6; color:var(--ink); white-space: pre-wrap; font-size: 15px; min-height: 0;
}
/* Slim glass scrollbars for transcript areas */
.card-b::-webkit-scrollbar{ width:8px; height:8px; }
.card-b::-webkit-scrollbar-track{ background: transparent; }
.card-b::-webkit-scrollbar-thumb{
  background: linear-gradient(145deg, var(--glass-grad-c), var(--glass-grad-d));
  border-radius:10px; border:2px solid rgba(255,255,255,.35);
}
.card-b{ scrollbar-width:thin; scrollbar-color: color-mix(in oklab, var(--glass-grad-d), transparent 10%) transparent; }

.placeholder{ color: var(--muted); }

/* ───────── FAB mic (3D + neon pulse/radiation when active) ───────── */

.fab-wrap{ position: fixed; left: 50%; transform: translateX(-50%); bottom: 22px; z-index: 10; }

.fab{
  position: relative; width: 60px; height: 60px; border-radius: 999px; border: none; cursor: pointer; color: #fff;
  background:
    radial-gradient(160% 160% at 50% 15%, rgba(255,255,255,.35) 0%, rgba(255,255,255,.06) 30%, rgba(0,0,0,.12) 70%),
    linear-gradient(180deg, color-mix(in oklab, var(--accent), white 18%) 0%, var(--accent) 60%, color-mix(in oklab, var(--accent), black 16%) 100%);
  box-shadow:
    0 14px 28px var(--ring),
    0 6px 12px color-mix(in oklab, var(--ink), transparent 82%),
    inset 0 2px 0 rgba(255,255,255,.35),
    inset 0 -8px 20px rgba(0,0,0,.18);
  display: grid; place-items: center;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, background .18s ease;
}
.fab:hover{ transform: translateY(-1px); filter: brightness(1.03); }
.fab:active{ transform: translateY(0); filter: brightness(.98); }

.fab .fab-icon{ width: 20px; height: 20px; display: block; }
.fab .mic-shape { filter: drop-shadow(0 2px 6px rgba(0,0,0,.15)); }

.fab.on{
  background:
    radial-gradient(160% 160% at 50% 12%, rgba(255,255,255,.42) 0%, rgba(255,255,255,.08) 26%, rgba(0,0,0,.10) 74%),
    linear-gradient(180deg, var(--green-bright) 0%, var(--green-deep) 68%, color-mix(in oklab, var(--green-deep), black 12%) 100%);
  box-shadow:
    0 18px 36px rgba(18,183,106,.45),
    0 8px 18px rgba(18,183,106,.35),
    0 0 0 2px rgba(50,255,126,.25),
    inset 0 2px 0 rgba(255,255,255,.45),
    inset 0 -10px 22px rgba(0,0,0,.22);
  animation: breathe 1.35s ease-in-out infinite;
}

.fab .rt-fab-ring{ position:absolute; inset:-10px; border-radius:999px; box-shadow: 0 0 0 0 rgba(50,255,126,0); pointer-events:none; }
.fab.on .rt-fab-ring{ animation: ringPulseGreen 1.1s ease-out infinite; }

.fab::before, .fab::after{ content:""; position:absolute; inset:-6px; border-radius:999px; pointer-events:none; opacity:0; transform: scale(.9); }
.fab.on::before{
  background: radial-gradient(50% 50% at 50% 50%, rgba(50,255,126,.35) 0%, rgba(50,255,126,.18) 38%, rgba(50,255,126,0) 70%);
  filter: blur(2px); animation: auraPulse 1.6s ease-out infinite;
}
.fab.on::after{ box-shadow: 0 0 0 0 rgba(50,255,126,.55); animation: shockwave 1.6s ease-out infinite; }

@keyframes ringPulseGreen{ 0% { box-shadow: 0 0 0 0 rgba(50,255,126,.45);} 100% { box-shadow: 0 0 0 22px rgba(50,255,126,0);} }
@keyframes auraPulse{ 0% { opacity:.60; transform: scale(.92);} 60% { opacity:.12; transform: scale(1.25);} 100% { opacity:0; transform: scale(1.38);} }
@keyframes shockwave{ 0% { opacity:.55; box-shadow: 0 0 0 0 rgba(50,255,126,.55);} 80% { opacity:0; box-shadow: 0 0 0 36px rgba(50,255,126,0);} 100% { opacity:0; box-shadow: 0 0 0 38px rgba(50,255,126,0);} }
@keyframes breathe{ 0% { transform: translateY(-1px) scale(1.00); filter: brightness(1.02) saturate(1.04);} 50% { transform: translateY(-1px) scale(1.04); filter: brightness(1.12) saturate(1.18);} 100% { transform: translateY(-1px) scale(1.00); filter: brightness(1.02) saturate(1.04);} }

.fab[disabled]{ opacity: .65; cursor:not-allowed; animation: none; }
.fab[disabled]::before, .fab[disabled]::after{ display:none; }

/* ───────── Responsive ───────── */

@media (max-width:1024px){
  .langbar{ display:none; } /* mobile uses drawer only */
}

@media (max-width:900px){
  .rt2-header{ grid-template-columns:1fr auto; }
  .cards{ grid-template-columns:1fr; gap:16px; }
  .card{ height: clamp(230px, 36vh, 360px); }
  .rt2-main{ gap:14px; }
  .orb-shell, .orb-shell.compact{ width: min(68vw, 300px); }
}

@media (max-width:480px){
  .rt2-header{ padding:10px 12px; gap:10px; }
  .brand-icon{ width:28px; height:28px; }
  .brand-title{ font-size:15px; }

  .card-h{ padding:12px 12px; }
  .card-b{ padding:12px 12px; font-size:14.5px; }
  .card{ height: clamp(210px, 38vh, 330px); }

  .fab{ width:56px; height:56px; }
  .fab .fab-icon{ width:18px; height:18px; }

  .orb-shell, .orb-shell.compact{ width: min(70vw, 280px); }

  /* tighter glass controls */
  .lang-input{ padding:8px 10px; }
  .lang-input select{ padding: 8px 28px 8px 8px; font-size:13px; }
  .drawer-row select{ padding: 8px 26px 8px 10px; font-size:13px; }
}
