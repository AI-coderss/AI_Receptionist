/* RealtimeTranslator.css
   - Cards ABOVE the orb
   - Active FAB: bright green with green pulse; smaller icon
   - Dark theme cyan across UI
   - ORB shell sizing here; inner canvas footprint handled in BaseOrb.css
   - Scroll INSIDE cards with visible, slim scrollbars
*/

/* ─────────────────────────────────────────────────────────────────────────── */
/* Base + Themes                                                               */
/* ─────────────────────────────────────────────────────────────────────────── */

:root {
  --bg: #f7f9fb;
  --card: #ffffff;
  --ink: #0f172a;
  --muted: #64748b;

  --accent: #2f80ed;
  --accent-ghost: rgba(47, 128, 237, 0.12);
  --ring: rgba(47, 128, 237, 0.25);

  --success: #10b981;
  --green: #22c55e; /* bright green for active FAB */
  --warn: #f59e0b;
  --danger: #ef4444;

  --radius: 18px;
  --shadow: 0 14px 40px rgba(2, 8, 23, 0.07), 0 6px 16px rgba(2, 8, 23, 0.05);
}

/* Dark: cyan everywhere */
[data-theme="dark"] {
  --bg: #050a12;
  --card: #0b1320;
  --ink: #e6faff;
  --muted: #9cc7d6;

  --accent: #22d3ee; /* cyan */
  --accent-ghost: rgba(34, 211, 238, 0.20);
  --ring: rgba(34, 211, 238, 0.32);

  --success: #34d399;
  --green: #22c55e;
  --warn: #fbbf24;
  --danger: #f87171;

  --shadow: 0 16px 44px rgba(0,0,0,.55), 0 6px 14px rgba(0,0,0,.35);
}

*,
*::before,
*::after { box-sizing: border-box; }

html, body, #root { height: 100%; }

/* Hide global horizontal scrollbar; verticale ok per la pagina */
html, body {
  margin: 0;
  color: var(--ink);
  background: var(--bg);
  font-family:
    Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
    Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  overflow-x: hidden;
}

button, select {
  font: inherit;
  color: inherit;
  background: none;
  border: none;
  outline: none;
}
select:focus-visible, button:focus-visible {
  box-shadow: 0 0 0 3px var(--ring);
  border-radius: 12px;
}

/* ─────────────────────────────────────────────────────────────────────────── */
/* Header + Bar                                                                */
/* ─────────────────────────────────────────────────────────────────────────── */

.rt2-app { min-height: 100vh; background: var(--bg); color: var(--ink); }

.rt2-header {
  position: sticky; top: 0; z-index: 8;
  display: grid; grid-template-columns: 1fr auto 1fr; align-items: center;
  gap: 16px; padding: 14px 18px;
  background: color-mix(in oklab, var(--card), transparent 18%);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid color-mix(in oklab, var(--ink), transparent 88%);
}

/* Brand */
.brand { display:flex; align-items:center; gap:10px; font-weight:800; }
.brand .logo{
  width:28px;height:28px;border-radius:8px;
  background: linear-gradient(135deg, #7dd3fc, #34d399);
  box-shadow: inset 0 0 0 1px rgb(255 255 255 / 30%);
}
.brand-title{ font-size:15px; }
.brand-sub{ font-size:12px; color:var(--muted); font-weight:600; }

/* Desktop language pickers (hidden on mobile) */
.langbar { display:flex; align-items:center; justify-content:center; gap:14px; }
.lang { display:flex; align-items:center; gap:10px; padding: 4px 0; }
.lang-role { font-size: 12px; color: var(--muted); font-weight: 900; }
.lang-input { display:flex; align-items:center; gap:8px; }
.lang-code{
  font-size: 12px; color: var(--muted); font-weight: 800; letter-spacing: .3px;
  padding: 2px 6px; border-radius: 8px;
  background: color-mix(in oklab, var(--ink), transparent 92%);
}
.langbar select{
  appearance:none; padding:11px 38px 11px 12px; border-radius:12px;
  border:1px solid color-mix(in oklab, var(--ink), transparent 87%);
  background: var(--card); color: var(--ink); font-weight:700;
  transition: border-color .12s ease, box-shadow .12s ease;
}
.langbar select:hover{ border-color: color-mix(in oklab, var(--ink), transparent 78%); }
.langbar select:focus-visible{ border-color: var(--accent); box-shadow: 0 0 0 3px var(--ring); }
.lang-swap{ color:var(--muted); font-weight:900; }

/* Header right */
.hdr-right{ justify-self:end; display:flex; align-items:center; gap:10px; }
/* Nascondi ThemeSwitch nel header mobile; resta nel drawer */
@media (max-width: 1024px){
  .hdr-right .switch { display: none !important; }
}

/* Connection pill */
.pill{
  font-size:12px; padding:6px 10px; border-radius:999px;
  border:1px solid color-mix(in oklab, var(--ink), transparent 85%);
  background: var(--card); font-weight:800;
}
.pill.connected{
  border-color: color-mix(in oklab, var(--success), transparent 30%);
  color: color-mix(in oklab, var(--success), black 20%);
  background: color-mix(in oklab, var(--success), transparent 90%);
}
.pill.connecting{
  border-color: color-mix(in oklab, var(--warn), transparent 35%);
  color: color-mix(in oklab, var(--warn), black 25%);
  background: color-mix(in oklab, var(--warn), transparent 90%);
}
.pill.disconnected, .pill.error{
  border-color: color-mix(in oklab, var(--danger), transparent 35%);
  color: color-mix(in oklab, var(--danger), black 20%);
  background: color-mix(in oklab, var(--danger), transparent 92%);
}

/* Classic hamburger */
.hamburger{
  width:42px;height:36px;border-radius:8px; display:none;
  align-items:center; justify-content:center; gap:4px; cursor:pointer; background: transparent;
}
.hamburger span{
  display:block; width:22px; height:2px; background:var(--ink);
  border-radius:2px; transition:transform .18s ease, opacity .18s ease;
}
.hamburger.open span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
.hamburger.open span:nth-child(2){ opacity:0; }
.hamburger.open span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }

/* Drawer (mobile only) */
.drawer{ position:fixed; inset:0; pointer-events:none; }
.drawer.open{ pointer-events:auto; }
.drawer-panel{
  position:absolute; right:-340px; top:0; width:340px; max-width:92vw; height:100%;
  background: var(--card); color: var(--ink);
  box-shadow: -22px 0 44px rgba(0,0,0,.10);
  border-left:1px solid color-mix(in oklab, var(--ink), transparent 88%);
  transition:right .22s ease; display:flex; flex-direction:column;
}
.drawer.open .drawer-panel{ right:0; }
.drawer-backdrop{ position:absolute; inset:0; background: rgba(2,8,23,.12); opacity:0; transition:opacity .22s ease; }
.drawer.open .drawer-backdrop{ opacity:1; }

.drawer-h{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid color-mix(in oklab, var(--ink), transparent 88%); }
.drawer-title{ font-weight:800; }
.drawer-close{
  width:32px;height:32px;border-radius:8px;
  background: color-mix(in oklab, var(--ink), transparent 92%); color: var(--ink);
}

.drawer-section{ padding:12px 16px; display:grid; gap:12px; }
.drawer-row{ display:grid; grid-template-columns: 1fr auto; align-items:center; gap:12px; }
.drawer-row select{
  appearance:none; padding:8px 28px 8px 10px; border-radius:10px;
  border:1px solid color-mix(in oklab, var(--ink), transparent 85%);
  background: var(--card); color: var(--ink); font-weight:700;
}
.drawer-action{
  margin: auto 16px 16px; padding: 12px 16px;
  border-radius: 12px; background: var(--accent); color: #fff; font-weight: 800;
  border: none; cursor: pointer; box-shadow: 0 10px 22px var(--ring);
}
.drawer-action.connected{ background:#16a34a; }

/* ─────────────────────────────────────────────────────────────────────────── */
/* Main + ORB                                                                  */
/* ─────────────────────────────────────────────────────────────────────────── */

.rt2-main{
  max-width: 1160px;
  margin: 16px auto 96px; /* extra bottom space so FAB never overlaps */
  padding: 0 16px;
}

/* Cards ABOVE the orb */
.cards{
  display:grid; gap:18px; grid-template-columns: 1fr 1fr;
  margin-top: 6px;
}
.cards.raised{ transform: translateY(0); }

/* Altezza fissa/responsiva delle card: il contenuto scorre dentro */
.card{
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  border: 1px solid color-mix(in oklab, var(--ink), transparent 90%);
  height: clamp(240px, 32vh, 360px);
  display:flex; flex-direction:column; min-height: 0; /* important for flex children overflow */
}

.card-h{
  display:flex; align-items:center; justify-content:space-between;
  padding: 14px 16px;
  border-bottom:1px solid color-mix(in oklab, var(--ink), transparent 90%);
  flex: 0 0 auto;
}
.title{ display:flex; align-items:center; gap:10px; font-weight:900; }
.avatar{ width:18px; height:18px; border-radius:6px; background: color-mix(in oklab, var(--ink), transparent 85%); }
.chip{
  font-size:12px; padding:6px 10px; border-radius: 10px;
  background: var(--accent-ghost); color: var(--accent); font-weight:900;
}

/* Area testo scrollabile, senza alterare il layout */
.card-b{
  padding: 14px 16px;
  flex: 1 1 auto;
  overflow: auto;                 /* scroll interno */
  -webkit-overflow-scrolling: touch; /* momentum iOS */
  overscroll-behavior: contain;   /* evita trascinare la pagina */
  line-height:1.6; color:var(--ink);
  white-space: pre-wrap;
  font-size: 15px;
  min-height: 0;                  /* fondamentale per il flex container */
}

/* Scrollbar sottili e visibili */
.card-b::-webkit-scrollbar { width: 8px; height: 8px; }
.card-b::-webkit-scrollbar-track {
  background: color-mix(in oklab, var(--ink), transparent 94%);
  border-radius: 10px;
}
.card-b::-webkit-scrollbar-thumb {
  background: color-mix(in oklab, var(--ink), transparent 70%);
  border-radius: 10px;
}
.card-b::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklab, var(--ink), transparent 60%);
}

/* Firefox */
.card-b{
  scrollbar-width: thin;
  scrollbar-color: color-mix(in oklab, var(--ink), transparent 70%)
                   color-mix(in oklab, var(--ink), transparent 94%);
}

.placeholder{ color: var(--muted); }

/* Orb below the cards (shell size here; canvas footprint in BaseOrb.css) */
.orb-row{ display:flex; justify-content:center; }
.orb-shell{
  width: min(86vw, 520px);
  aspect-ratio: 1/1; border-radius:999px;
  background: radial-gradient(
    120% 120% at 50% 30%,
    color-mix(in oklab, var(--accent), white 82%) 0%,
    color-mix(in oklab, var(--bg), white 12%) 42%,
    var(--card) 72%
  );
  box-shadow: var(--shadow), inset 0 0 0 1px color-mix(in oklab, var(--ink), transparent 90%);
  display:grid; place-items:center; margin: 8px auto 4px;
  overflow:hidden;
}
.orb-shell.small{
  width: min(74vw, 420px);   /* retain shell size; canvas shrinks inside via BaseOrb.css */
}

/* ─────────────────────────────────────────────────────────────────────────── */
/* Mic Floating Action Button (bright green active + smaller icon)             */
/* ─────────────────────────────────────────────────────────────────────────── */

.fab-wrap{
  position: fixed; left: 50%; transform: translateX(-50%);
  bottom: 20px; z-index: 10;
}
.fab{
  position: relative;
  width: 62px; height: 62px; border-radius: 999px; border:none; cursor:pointer;
  background: var(--accent); color:#fff;
  box-shadow: 0 10px 24px var(--ring);
  display:grid; place-items:center;
  transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
}
.fab:hover{ transform: translateY(-1px); }
.fab:active{ transform: translateY(0); }

/* Smaller icon inside */
.fab .fab-icon{ width: 22px; height: 22px; display:block; }
.fab .mic-shape { filter: drop-shadow(0 2px 6px rgba(0,0,0,.15)); }

/* Green state + pulse */
.fab.on{ background: var(--green); }
.fab .rt-fab-ring{
  position:absolute; inset:-8px; border-radius:999px;
  box-shadow: 0 0 0 0 rgba(34,197,94,0);
  pointer-events:none;
}
.fab.on .rt-fab-ring{ animation: ringPulseGreen 1.3s ease-out infinite; }
@keyframes ringPulseGreen{
  0% { box-shadow: 0 0 0 0 rgba(34,197,94,.35); }
  100% { box-shadow: 0 0 0 18px rgba(34,197,94,0); }
}
.fab[disabled]{ opacity: .65; cursor:not-allowed; }

/* ─────────────────────────────────────────────────────────────────────────── */
/* Responsive                                                                  */
/* ─────────────────────────────────────────────────────────────────────────── */

@media (max-width: 1024px){
  .hamburger{ display:inline-flex; }
  .langbar{ display:none; }         /* mobile uses drawer only */
}

@media (max-width: 900px){
  .rt2-header{ grid-template-columns: 1fr auto; grid-template-rows: auto; }
  .cards{ grid-template-columns: 1fr; }
  .card{ height: clamp(220px, 34vh, 340px); } /* un filo più alta su tablet */
  .orb-shell.small{ width: min(78vw, 380px); }
}

@media (max-width: 480px){
  .rt2-header{ padding: 10px 12px; gap:10px; }
  .card-h{ padding: 12px 12px; }
  .card-b{ padding: 12px 12px; font-size: 14.5px; }
  .card{ height: clamp(210px, 36vh, 320px); }  /* mobile: fissa e scorrevole */
  .fab{ width: 58px; height: 58px; }
  .fab .fab-icon{ width: 20px; height: 20px; }
  .orb-shell.small{ width: min(72vw, 320px); } /* shell resta, canvas si riduce in BaseOrb.css */
}
